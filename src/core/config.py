from datetime import time
from pathlib import Path
from zoneinfo import ZoneInfo

from pydantic_settings import BaseSettings, SettingsConfigDict

class Settings(BaseSettings):
    """
    –ö–ª–∞—Å –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–º—ñ–Ω–Ω—ñ –∑ —Ñ–∞–π–ª—É .env.
    """
    model_config = SettingsConfigDict(
        env_file='.env',
        env_file_encoding='utf-8',
        case_sensitive=True
    )

    # --- 1. Telegram —Ç–∞ Bot Core ---
    BOT_TOKEN: str

    # --- 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–∞–∑–∏ –î–∞–Ω–∏—Ö ---
    DATABASE_URL: str

    # --- 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞ (Scheduling) ---
    # üïí –ó–ú–Ü–ù–ï–ù–û: –ß–∞—Å —Ä–æ–∑—Å–∏–ª–∫–∏ —Ç–µ–ø–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–∏—ó–≤—Å—å–∫–æ—ó —á–∞—Å–æ–≤–æ—ó –∑–æ–Ω–∏.
    SCHEDULE_TIME: time = time(hour=16, minute=1, second=0, tzinfo=ZoneInfo("Europe/Kiev"))

    # --- 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google Sheets/Drive ---
    # üîí –ó–ú–Ü–ù–ï–ù–û: –¢–µ–ø–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –≤–º—ñ—Å—Ç credentials.json –∑ —Ü—ñ—î—ó –∑–º—ñ–Ω–Ω–æ—ó, –∞ –Ω–µ –∑ —Ñ–∞–π–ª—É.
    # –£ –≤–∞—à–æ–º—É .env —Ñ–∞–π–ª—ñ —Ü—è –∑–º—ñ–Ω–Ω–∞ –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –≤–µ—Å—å JSON —É –≤–∏–≥–ª—è–¥—ñ —Ä—è–¥–∫–∞.
    GOOGLE_CREDENTIALS_JSON: str

    # ID Google Sheets, –∑–≤—ñ–¥–∫–∏ —ñ–º–ø–æ—Ä—Ç—É—î–º–æ –¥–∞–Ω—ñ —Å—Ç–∞–∂–µ—Ä—ñ–≤
    INTERN_SHEET_ID: str

    # –ù–∞–∑–≤–∞ –∞—Ä–∫—É—à–∞ –≤ —Ç–∞–±–ª–∏—Ü—ñ, –¥–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —Å—Ç–∞–∂–µ—Ä–∏
    INTERN_WORKSHEET_NAME: str = "–ë–î –°—Ç–∞–∂–µ—Ä–∏"

    # ID Google DOCS, –∑–≤—ñ–¥–∫–∏ —ñ–º–ø–æ—Ä—Ç—É—î–º–æ –ø–∏—Ç–∞–Ω–Ω—è
    QUESTION_DOC_ID: str

    # ID Google Doc –¥–ª—è –∑–∞–ø–∏—Å—É –∑–≤—ñ—Ç—ñ–≤
    REPORT_DOC_ID: str = "1onNj_UAcsNv6xioHBv8HowETMlmll5M8IOY4Nb_2pxE"

    # üìÇ –ó–ú–Ü–ù–ï–ù–û: –®–ª—è—Ö –±—É–¥–µ –≤—ñ–¥–Ω–æ—Å–Ω–∏–º —É .env, –∞–ª–µ –∞–±—Å–æ–ª—é—Ç–Ω–∏–º —É –ø—Ä–æ–≥—Ä–∞–º—ñ
    # –®–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –¥–µ –±—É–¥–µ–º–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó
    PHOTO_DIR: str = "data/question_photos"


# –°—Ç–≤–æ—Ä—é—î–º–æ —î–¥–∏–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —É –≤—Å—å–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ.
settings = Settings()


# --- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è —à–ª—è—Ö—ñ–≤ –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ ---

# –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫–æ—Ä–µ–Ω–µ–≤—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ—î–∫—Ç—É (–ø–∞–ø–∫–∞, —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å `src`)
BASE_DIR = Path(__file__).resolve().parent.parent.parent

# –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –≤—ñ–¥–Ω–æ—Å–Ω–∏–π —à–ª—è—Ö PHOTO_DIR –Ω–∞ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π.
# –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–∞–≤–∂–¥–∏ –∑–Ω–∞–π–¥–µ —Ü—é –ø–∞–ø–∫—É, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –∑–≤—ñ–¥–∫–∏ —ó—ó –∑–∞–ø—É—â–µ–Ω–æ.
absolute_photo_dir = BASE_DIR / settings.PHOTO_DIR

# –û–Ω–æ–≤–ª—é—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö —Ç–∞ –æ–¥—Ä–∞–∑—É —Å—Ç–≤–æ—Ä—é—î–º–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é, —è–∫—â–æ —ó—ó –Ω–µ–º–∞—î.
settings.PHOTO_DIR = str(absolute_photo_dir)
absolute_photo_dir.mkdir(parents=True, exist_ok=True)